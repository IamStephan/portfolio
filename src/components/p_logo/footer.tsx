import React from 'react'
import { spring } from 'react-flip-toolkit'
import Wrapper, { Props as BaseProps } from './item_wrapper'

interface Props extends BaseProps {
  shouldExit?: boolean
}

const _handleExit = (element: HTMLElement) => {
  spring({
    values: {
      opacity: [1, 0],
      transform: [0, 25],
    },
    onUpdate({ opacity, transform }: any) {
      if (!element.getAttribute('moved')) {
        document.body.appendChild(element)
        element.setAttribute('moved', '')

        element.style.top = `${element.getAttribute('rect-top') as any}px`
        element.style.left = `${element.getAttribute('rect-left') as any}px`
        element.style.position = 'fixed'
      }

      element.style.opacity = opacity
      element.style.transform = `translateY(${transform}px)`
    },
    onComplete() {
      element.remove()
    },
  })
}

const LogoFooter: React.FC<Props> = ({
  flipId = 'logo-footer',
  shouldExit,
  ...rest
}) => {
  return (
    <Wrapper
      flipId={flipId}
      divRef={(ref) => {
        if (ref) {
          const rect = ref.getBoundingClientRect()
          ref.setAttribute('rect-top', `${rect.y}`)
          ref.setAttribute('rect-left', `${rect.x}`)
        }
      }}
      onExit={shouldExit ? _handleExit : undefined}
      {...rest}
    >
      <svg
        className="w-full h-auto"
        viewBox="0 0 668 368"
        preserveAspectRatio="xMaxYMid meet"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M67.2222 57.3389V76.3264H32.8735V91.4191H58.2087V109.555H32.8735V143.148H9V57.3389H67.2222Z"
          fill="#FAFAFA"
        />
        <path
          d="M120.761 143.148L103.708 111.502H101.15V143.148H77.2767V57.3389H114.914C121.816 57.3389 127.663 58.556 132.454 60.9903C137.245 63.3435 140.858 66.6298 143.294 70.8492C145.73 74.9875 146.948 79.6533 146.948 84.8465C146.948 90.6888 145.324 95.8414 142.076 100.304C138.909 104.686 134.24 107.81 128.069 109.676L147.436 143.148H120.761ZM101.15 95.1923H112.965C116.213 95.1923 118.649 94.4214 120.273 92.8797C121.897 91.3379 122.71 89.1065 122.71 86.1853C122.71 83.4265 121.857 81.2762 120.152 79.7344C118.528 78.1116 116.132 77.3001 112.965 77.3001H101.15V95.1923Z"
          fill="#FAFAFA"
        />
        <path
          d="M198.975 144C190.936 144 183.546 142.134 176.807 138.401C170.067 134.587 164.707 129.354 160.728 122.7C156.831 115.965 154.882 108.378 154.882 99.9391C154.882 91.5002 156.831 83.9539 160.728 77.3001C164.707 70.5652 170.067 65.3315 176.807 61.5989C183.546 57.8663 190.936 56 198.975 56C207.095 56 214.485 57.8663 221.143 61.5989C227.883 65.3315 233.202 70.5652 237.099 77.3001C240.997 83.9539 242.946 91.5002 242.946 99.9391C242.946 108.378 240.997 115.965 237.099 122.7C233.202 129.354 227.883 134.587 221.143 138.401C214.403 142.134 207.014 144 198.975 144ZM198.975 121.848C205.065 121.848 209.856 119.86 213.348 115.884C216.921 111.908 218.707 106.593 218.707 99.9391C218.707 93.1231 216.921 87.7676 213.348 83.8728C209.856 79.8967 205.065 77.9087 198.975 77.9087C192.803 77.9087 187.972 79.8967 184.48 83.8728C180.988 87.7676 179.243 93.1231 179.243 99.9391C179.243 106.674 180.988 112.03 184.48 116.006C187.972 119.9 192.803 121.848 198.975 121.848Z"
          fill="#FAFAFA"
        />
        <path
          d="M333.216 143.148H309.342L277.552 95.1923V143.148H253.678V57.3389H277.552L309.342 105.903V57.3389H333.216V143.148Z"
          fill="#FAFAFA"
        />
        <path
          d="M411.493 57.3389V76.3264H388.594V143.148H364.72V76.3264H342.065V57.3389H411.493Z"
          fill="#FAFAFA"
        />
        <path
          d="M444.199 76.4481V90.4454H471.605V108.581H444.199V124.039H475.259V143.148H420.326V57.3389H475.259V76.4481H444.199Z"
          fill="#FAFAFA"
        />
        <path
          d="M566.594 143.148H542.72L510.929 95.1923V143.148H487.056V57.3389H510.929L542.72 105.903V57.3389H566.594V143.148Z"
          fill="#FAFAFA"
        />
        <path
          d="M614.176 57.3389C623.19 57.3389 631.066 59.1646 637.806 62.816C644.627 66.3863 649.865 71.4172 653.519 77.9087C657.173 84.4002 659 91.8248 659 100.183C659 108.459 657.132 115.843 653.397 122.335C649.743 128.826 644.505 133.938 637.684 137.671C630.944 141.322 623.109 143.148 614.176 143.148H580.193V57.3389H614.176ZM612.349 122.091C619.333 122.091 624.814 120.184 628.793 116.371C632.772 112.557 634.761 107.161 634.761 100.183C634.761 93.1231 632.772 87.6865 628.793 83.8728C624.814 79.9779 619.333 78.0304 612.349 78.0304H604.066V122.091H612.349Z"
          fill="#FAFAFA"
        />
        <path
          d="M41.2914 186.308C49.8562 186.308 57.3407 188.093 63.745 191.661C70.2264 195.15 75.2032 200.067 78.6754 206.411C82.1476 212.755 83.8837 220.011 83.8837 228.178C83.8837 236.267 82.1091 243.483 78.5597 249.827C75.0875 256.171 70.1107 261.167 63.6292 264.815C57.225 268.383 49.779 270.167 41.2914 270.167H9V186.308H41.2914ZM39.5553 249.589C46.1911 249.589 51.3994 247.726 55.1802 243.999C58.9611 240.272 60.8515 234.998 60.8515 228.178C60.8515 221.279 58.9611 215.966 55.1802 212.239C51.3994 208.433 46.1911 206.53 39.5553 206.53H31.685V249.589H39.5553Z"
          fill="#FAFAFA"
        />
        <path
          d="M116.795 204.983V218.663H142.836V236.386H116.795V251.492H146.308V270.167H94.1095V186.308H146.308V204.983H116.795Z"
          fill="#FAFAFA"
        />
        <path
          d="M236.915 186.308L208.791 270.167H179.74L151.499 186.308H175.805L194.323 246.853L212.726 186.308H236.915Z"
          fill="#FAFAFA"
        />
        <path
          d="M266.669 204.983V218.663H292.71V236.386H266.669V251.492H296.182V270.167H243.984V186.308H296.182V204.983H266.669Z"
          fill="#FAFAFA"
        />
        <path
          d="M330.077 252.325H355.424V270.167H307.392V186.308H330.077V252.325Z"
          fill="#FAFAFA"
        />
        <path
          d="M403.365 271C395.726 271 388.704 269.176 382.3 265.528C375.896 261.801 370.803 256.686 367.022 250.184C363.319 243.602 361.467 236.188 361.467 227.941C361.467 219.693 363.319 212.319 367.022 205.816C370.803 199.234 375.896 194.119 382.3 190.472C388.704 186.824 395.726 185 403.365 185C411.081 185 418.102 186.824 424.429 190.472C430.834 194.119 435.888 199.234 439.591 205.816C443.295 212.319 445.147 219.693 445.147 227.941C445.147 236.188 443.295 243.602 439.591 250.184C435.888 256.686 430.834 261.801 424.429 265.528C418.025 269.176 411.004 271 403.365 271ZM403.365 249.351C409.152 249.351 413.704 247.408 417.022 243.523C420.417 239.637 422.115 234.443 422.115 227.941C422.115 221.279 420.417 216.046 417.022 212.239C413.704 208.354 409.152 206.411 403.365 206.411C397.501 206.411 392.91 208.354 389.592 212.239C386.274 216.046 384.615 221.279 384.615 227.941C384.615 234.522 386.274 239.756 389.592 243.642C392.91 247.448 397.501 249.351 403.365 249.351Z"
          fill="#FAFAFA"
        />
        <path
          d="M519.812 214.261C519.812 219.337 518.654 223.976 516.34 228.178C514.102 232.302 510.668 235.633 506.039 238.17C501.486 240.628 495.892 241.858 489.257 241.858H478.03V270.167H455.345V186.308H489.257C495.815 186.308 501.371 187.498 505.923 189.877C510.553 192.256 514.025 195.547 516.34 199.75C518.654 203.953 519.812 208.79 519.812 214.261ZM487.057 223.302C493.462 223.302 496.664 220.288 496.664 214.261C496.664 208.155 493.462 205.102 487.057 205.102H478.03V223.302H487.057Z"
          fill="#FAFAFA"
        />
        <path
          d="M551.61 204.983V218.663H577.652V236.386H551.61V251.492H581.124V270.167H528.925V186.308H581.124V204.983H551.61Z"
          fill="#FAFAFA"
        />
        <path
          d="M633.653 270.167L617.449 239.241H615.019V270.167H592.334V186.308H628.097C634.656 186.308 640.212 187.498 644.764 189.877C649.316 192.177 652.75 195.388 655.065 199.512C657.38 203.556 658.537 208.116 658.537 213.191C658.537 218.9 656.994 223.936 653.907 228.297C650.898 232.58 646.461 235.633 640.597 237.456L659 270.167H633.653ZM615.019 223.302H626.246C629.332 223.302 631.647 222.548 633.19 221.041C634.733 219.535 635.505 217.354 635.505 214.499C635.505 211.803 634.695 209.702 633.074 208.195C631.531 206.609 629.255 205.816 626.246 205.816H615.019V223.302Z"
          fill="#FAFAFA"
        />
        <line
          x1="2.18557e-06"
          y1="343"
          x2="668"
          y2="343"
          stroke="#FAFAFA"
          strokeWidth="50"
        />
      </svg>
    </Wrapper>
  )
}

export default LogoFooter
